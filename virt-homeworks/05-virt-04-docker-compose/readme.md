# Домашнее задание к занятию 3. «Введение. Экосистема. Архитектура. Жизненный цикл Docker-контейнера»

## Выполнил Шарафуков Ильшат

### 1. Создайте собственный образ любой операционной системы (например ubuntu-20.04) с помощью Packer.

Создал образ ВМ Ubuntu22-LTS:

![packer_ubuntu.png](img/1_1.png)

### 2.1. Создайте вашу первую виртуальную машину в YandexCloud с помощью web-интерфейса YandexCloud.

Вручную создал ВМ в YC:

![ubuntu_yc.png](img/2_1.png)

После создания данная ВМ была сразу же удалена. ВСЕ последующие задания делались с ВМ которая была создана через terraform!!!!!!!!

### 2.2.* (Необязательное задание). Создайте вашу первую виртуальную машину в YandexCloud с помощью Terraform (вместо использования веб-интерфейса YandexCloud). Используйте Terraform-код в директории (src/terraform).

Создал ВМ с помощью terraform: 

![terraform_apply.png](img/2_2.png)

Скриншот данной ВМ в YC:

![terraform_vm_create.png](img/2_3.png)


### 3. С помощью Ansible и Docker Compose разверните на виртуальной машине из предыдущего задания систему мониторинга на основе Prometheus/Grafana.

С помощью ansible развернул мониторинг на базе сервисов prometheus\grafana. Для того чтобы плейбук на ansible запустился под ОС ubuntu, пришлось его переписать (см. файл ansible/provision.yml)

![ansible_playbook.png](img/3_1.png)

Docker контейенер с Caddy не запустился по неизвестной причине, в логах не было никакой внятной информации о причинах данного поведения:

![docker_ps.png](img/3_2.png)

Поэтому чтобы графана была доступна извне, я переписал docker-compose файл в директории /opt/stack на ВМ в облаке:

![docker-compose_file.png](img/3_4.png)

### 4. Предоставьте скриншот работающего веб-интерфейса Grafana с текущими метриками, как на примере ниже.

Скриншот работающей графаны (ip адреса совпадают со вторым заданием):

![grafana.png](img/3_3.png)
